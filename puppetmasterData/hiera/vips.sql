services: SELECT s.name,s.params,v.name as vip_name,c.puppet_type FROM services AS s, checks AS c, vips AS v, projects AS p, environments AS e WHERE s.check_id=c.id AND s.vip_id=v.id AND v.project_id=p.id AND s.environment_id=e.id AND e.name = '%{::env}' AND v.name = ANY(string_to_array('%{::vip}',',')) AND p.name = '%{::project}';
vip_nodes: SELECT v.name,v.ip as address,'monitorizacion::viphost' AS puppet_type FROM vips AS v, projects AS p, environments AS e WHERE v.environment_id=e.id AND e.name = '%{::env}' AND v.project_id=p.id AND p.name = '%{::project}' AND v.name = ANY(string_to_array('%{::vip}',','));
